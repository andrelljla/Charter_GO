# this is draft #1 of the Locations component of the WebAPI specification for Gateway Ordering
swagger: '2.0'
info:
  title: Gateway Ordering API - Locations API
  description: Gateway Ordering Locations API
  version: "1.0.0"
# the domain of the service
host: gateway.chartercom.com
# array of all schemes that your API supports
schemes:
  - https
# will be prefixed to all paths
basePath: /v1
produces:
  - application/json
paths:

  ServiceableLocations/{LocationID}:
    get:
      summary: Docref W13, W18 - Determine serviceability at location
      description: Determine the products and services eligible for sale at the requested address/location.  The same service will be used to determine both "New Connect" location service compatability as well as "Transfer-To" Location service compatability.  Boolean value for serviceability (is/is not serivceable) can be inferred from the existence of rows in the service return data set. 
      parameters:
        - name: LocationID
          in: path
          required: true
          type: integer
          description: Unique identifier for the address/location being queried for serviceability
        - name: ServiceabilityAtLocationRequest
          in: body
          description: Incudes input parameters common to all invocations
          required: true
          schema: 
           $ref: "#/definitions/ServiceabilityAtLocationRequest"
      tags:
        - W13
        - W18
      responses:
        200:
          description: Successful completion; return location serviceability
          schema:
            $ref: '#/definitions/ServiceabilityAtLocationResponse'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/CommonErrorReturn'

  ServiceableLocations/{LocationID}/Active:
    get:
      summary: Docref W16 - Get active services at location
      description: Retrieves the list of products and services currently active at the queried address/location.
      parameters:
        - name: LocationID
          in: path
          required: true
          type: integer
          description: <dr>
        - name: locationServiceabilityRequest
          in: body
          description: Incudes input parameters common to all invocations
          required: true
          schema: 
           $ref: "#/definitions/ActiveServicesAtLocationRequest"
      tags:
        - W16
      responses:
        200:
          description: Successful completion; return <function>
          schema:
            $ref: '#/definitions/ActiveServicesAtLocationResponse'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/CommonErrorReturn'


definitions:

##############################################
#
#	Request/Response definitions
#
##############################################

  ServiceabilityAtLocationRequest:
    properties:
      commonInputHeader:
        type: object
        $ref: '#/definitions/CommonInputHeader'
        description: Common parameters submitted with all service calls to support authentication, reporting, logging and troubleshooting.
  
  ServiceabilityAtLocationResponse:
    properties:
      commonReturn: 
        type: object
        $ref: '#/definitions/CommonNoErrorReturnHeader'
        description: <dr>
      locationServiceabilityDetail: 
        type: object
        $ref: '#/definitions/LocationServiceabilityDetail'
        description: <dr>

  ActiveServicesAtLocationRequest:
    properties:
      commonInputHeader:
        type: object
        $ref: '#/definitions/CommonInputHeader'
        description: Common parameters submitted with all service calls to support authentication, reporting, logging and troubleshooting.
  
  ActiveServicesAtLocationResponse:
    properties:
      commonReturn: 
        type: object
        $ref: '#/definitions/CommonNoErrorReturnHeader'
        description: <dr>
      ActiveServices:
        type: array
        items:
          $ref: '#/definitions/LoBLocationActiveProduct'

##############################################
#
#	Common Object definitions
#
##############################################

  CommonInputHeader:
    properties:
      username:
        type: string
        description: Encrypted username for proxy user authentication
      password:
        type: string
        description: Encrypted passaord for proxy user authentication
      invokingUser:
        type: string
        description: User name for the actual user that invoked the call (for audit purpose)
      applicationID:
        type: string
        description: Code identifying invoking application
      lineageID:
        type: integer
        description: Unique transaction identifier; used for transactional error handling
      timestamp:
        type: string
        description: Time that the service call was invoked

  CommonNoErrorReturnHeader:
    properties:
      lineageID:
        type: integer
        description: Unique transaction identifier; used for transactional error handling
      timestamp:
        type: string
        description: Time that the service call was returned
        
  CommonErrorReturn:
    properties:
      lineageID:
        type: integer
        description: Unique transaction identifier; used for transactional error handling
      timestamp:
        type: string
        description: Time that the service call was returned
      errorInfo:
        type: array
        items:
          $ref: "#/definitions/CommonErrors"
  
  CommonErrors:
    properties:
      errCode:
        type: string
      errMessage:
        type: string
      errDescription:
        type: string
      errGUID:
        type: string

##############################################
#
#	Function-Specific Object definitions
#
##############################################

  LocationServiceabilityDetail:
    properties:
      addressID:
        description: Address/location identifier being queried for serviceability
      dwellingType:
        type: string
        description: Code describing the type of dwelling present at the location.
      managementArea:
        type: string
        description: Telephone number management area.
      rateCenter:
        type: string
        description: Rate center associated with the location.
      market:
        type: string
        description: Market associated with the location.
      FTA:
        type: string
        description: Franchise tax area associated with the location.
      lobProductServiceability:
        type: array
        items:
          $ref: '#/definitions/LoBProductServiceability'

  LoBProductServiceability:
    properties:
      lobName: 
        type: string
        description: Line of Business (e.g. PHONE, TV, INTERNET)
      lobProduct:
        type: string
        description: Specific product within the LoB being referenced for serviceability
      lobProductServiceabilityStatus:
        type: boolean
        description: Indicator to identify if the is specified product is serviceable at the submitted location
    
  LoBLocationActiveProduct:
    properties:
      lobName: 
        type: string
        description: Line of Business (e.g. PHONE, TV, INTERNET)
      lobProduct:
        type: string
        description: Specific product within the LoB being referenced for serviceability

