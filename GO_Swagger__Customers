# this is draft #1 of the Customers component of the WebAPI specification for Gateway Ordering
swagger: '2.0'
info:
  title: Gateway Ordering API - Customers API
  description: Gateway Ordering Customers API
  version: "1.0.0"
# the domain of the service
host: gateway.chartercom.com
# array of all schemes that your API supports
schemes:
  - https
# will be prefixed to all paths
basePath: /v1
produces:
  - application/json
paths:
  /customers:
    get:
      summary: Docref W02 - Retrieve customer ID, account ID, and related account information
      description: Retrieves information on a person or entity previously known to Charter but who does not have a (readily previously identified) active account
      parameters:
        - name: GetCustomerIDRequest
          in: body
          description: Incudes input parameters common to all invocations
          required: true
          schema: 
            $ref: "#/definitions/GetCustomerIDRequest"
      tags:
        - W02
      responses:
        200:
          description: Successful completion; return key IDs
          schema:
            $ref: '#/definitions/GetCustomerIDResponse'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/CommonErrorReturn'

  /customers/{CustomerID}:
    get:
      summary: Docref W17 - Retrieve key customer information
      description: <dr>
      parameters:
        - name: CustomerID
          in: path
          type: integer
          description: Unique identifier for the Customer being queried
        - name: GetCustomerInformationRequest
          in: body
          description: Incudes input parameters common to all invocations
          required: true
          schema: 
            $ref: "#/definitions/GetCustomerInformationRequest"
      tags:
        - W17
      responses:
        200:
          description: Successful completion; return expanded customer information
          schema:
            $ref: '#/definitions/GetCustomerInformationResponse'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/CommonErrorReturn'

  /customers/{CustomerID}/PII:
    post:
      summary: Docref W11 precursor - Collect key personal identifying information (PII) for the specified customer.  Submitting the PII collection will trigger a credit check based on the PII supplied.
      description: <dr>
      parameters:
        - name: CustomerID
          in: path
          type: integer
          description: Unique identifier for the Customer for which PII is being collected
        - name: CustomerPIIRequest
          in: body
          description: Incudes input parameters common to all invocations
          required: true
          schema: 
            $ref: "#/definitions/CustomerPIIRequest"
      tags:
        - W11
      responses:
        200:
          description: Successful completion; return credit check result
          schema:
            $ref: '#/definitions/CustomerPIIResponse'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/CommonErrorReturn'

  /customers/account/{accountID}/billAddress:
    post:
      summary: Docref W23 - update account billing address
      description: <dr>
      parameters:
        - name: accountID
          in: path
          type: integer
          description: Unique identifier for the Customer's account being updated
        - name: BillingAddressUpdateRequest
          in: body
          description: Incudes input parameters common to all invocations
          required: true
          schema: 
            $ref: "#/definitions/BillingAddressUpdateRequest"
      tags:
        - W11
      responses:
        200:
          description: Successful completion; return updated account information
          schema:
            $ref: '#/definitions/BillingAddressUpdateRespose'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/CommonErrorReturn'

  

definitions:

##############################################
#
#	Request/Response definitions
#
##############################################

  FunctionRequest:
    properties:
      commonInputHeader:
        type: object
        $ref: '#/definitions/CommonInputHeader'
        description: Common parameters submitted with all service calls to support authentication, reporting, logging and troubleshooting.
                  
  FunctionResponse:
    properties:
      commonReturn: 
        type: object
        $ref: '#/definitions/CommonNoErrorReturnHeader'
        description: <dr>
      locationID:
        type: integer
        description: Unique identifier for the location.

##############################################
#
#	Common Object definitions
#
##############################################

  CommonInputHeader:
    properties:
      username:
        type: string
        description: Encrypted username for proxy user authentication
      password:
        type: string
        description: Encrypted passaord for proxy user authentication
      invokingUser:
        type: string
        description: User name for the actual user that invoked the call (for audit purpose)
      applicationID:
        type: string
        description: Code identifying invoking application
      lineageID:
        type: integer
        description: Unique transaction identifier; used for transactional error handling
      timestamp:
        type: string
        description: Time that the service call was invoked

  CommonNoErrorReturnHeader:
    properties:
      lineageID:
        type: integer
        description: Unique transaction identifier; used for transactional error handling
      timestamp:
        type: string
        description: Time that the service call was returned
        
  CommonErrorReturn:
    properties:
      lineageID:
        type: integer
        description: Unique transaction identifier; used for transactional error handling
      timestamp:
        type: string
        description: Time that the service call was returned
      errorInfo:
        type: array
        items:
          $ref: "#/definitions/CommonErrors"
  
  CommonErrors:
    properties:
      errCode:
        type: string
      errMessage:
        type: string
      errDescription:
        type: string
      errGUID:
        type: string

##############################################
#
#	Function-Specific Object definitions
#
##############################################

    
