# this is draft #1 of the comprehensive WebAPI specification for interfacing with the AMDOCS Order Engine
swagger: '2.0'
info:
  title: Gateway Ordering API - AMDOCS Interface (Offers)
  description: This specification defines the interface between WebAPI and the AMDOCS Ordering Engine.
  version: "1.0.0"
# the domain of the service
host: gateway.chartercom.com
# array of all schemes that your API supports
schemes:
  - https
# will be prefixed to all paths
basePath: /v1
produces:
  - application/json
paths:

  /commerce/customer/{customer-id}/product-order/{product-order-item-id}/product-configuration-options:
    post:
      summary: Docref W4_step3 - Get customization details
      description: The Product Configuration Options REST retrieves the product configuration of a product in an order from Ordering system. The returned configuration includes the current implemented configuration and all the available changes that can be applied on the product within the order. This REST is expected to be called by Charter per each Order Action ID retrieves from Product Order Items REST.
      parameters:
        - name: customer-id
          in: path
          type: string
          required: true
          description: <dr>
        - name: product-order-item-id
          in: path
          type: string
          required: true
          description: <dr>
        - name: username
          in: header
          type: string
          description: authentication username for proxy connection
          required: true
        - name: password
          in: header
          type: string
          description: authentication password for proxy connection
          required: true
        - name: applicationID
          in: header
          type: string
          description: Unique designation for the invoking application (e.g. GatewayOrdering)
          required: true
        - name: timestamp
          in: header
          type: string
          description: time the REST call was invoked
          required: true
        - name: sc
          required: true
          in: query
          type: string
          description: Sales Channel identifier
        - name: locale
          required: true
          in: query
          type: string
          description: Locale identifier, used for language translation
        - name: getProductConfigurationOptions
          in: body
          schema:
            $ref: '#/definitions/ImplProductConfigurationOptionsRequest'
          required: true
          description: <dr>

      tags:
        - W4_Step3
      responses:
        200:
          description: Succesful operation; return products associated with selected offers
          schema:
            $ref: '#/definitions/ImplProductConfigurationOptionsResponse'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/CommonErrorReturn'


definitions:

  CommonNoErrorReturn:
    properties:
      lineageID:
        type: integer
        description: Unique transaction identifier; used for transactional error handling
      timestamp:
        type: string
        description: Time that the service call was returned

  CommonErrorReturn:
    properties:
      lineageID:
        type: integer
        description: Unique transaction identifier; used for transactional error handling
      timestamp:
        type: string
        description: Time that the service call was returned
      errorInfo:
        type: array
        items:
          $ref: "#/definitions/CommonErrors"
  
  CommonErrors:
    properties:
      errCode:
        type: string
      errMessage:
        type: string
      errDescription:
        type: string
      errGUID:
        type: string

  ImplProductConfigurationOptionsRequest:
    properties:
      implRetrieveProductInOrderConfigurationRequest:
        type: object
        $ref: '#/definitions/ImplRetrieveProductInOrderConfigurationRequest'
        description: Main input
      serviceabilityObject:
        type: object
        $ref: '#/definitions/ServiceabilityObject'
        description: Addiktional information to support serviceability
        
  ImplRetrieveProductInOrderConfigurationRequest:
    properties:
      activityForConfiguration:
        type: string
        description: The parameter used to filter the Product Catalog rules and the Activity Designer display information.  The activity name can have any value that represents the action performed by the client and does not necessarily have to map to an activity (step) in the ordering process.
      serviceRequiredDate:
        type: number
        description: Charter must send system date.  Expects date as LONG.
      configurationLevel:
        type: string
        description: The level of configuration to be returned.  Charter must always send FULL.
        enum:
        - FULL
        - NOT_SELECTED
      settingsView:
        type: string
        description: Need description
        enum:
        - FULL
        - QUICK_SETTINGS
      returnConfigurationData:
        type: object
        $ref: '#/definitions/ReturnConfigurationData'
        description: Configuration Data
        
#############
  FlexAttributeValue:
    properties:
      integerValue:
        type: integer
        description: Integer Value
      stringValue:
        type: string
        description: String Value
      dateValue:
        type: string
        format: date
        description: Date Value
      decimalValue:
        type: number
        format: double
        description: Decimal Value
      booleanValue:
        type: boolean
        description: Boolean Value
      valueType: 
        type: string
        description: Data type for the defined attribute; only the corresponding value should be referenced.
        enum:
          - BOOLEAN
          - DATE
          - DECIMAL
          - INTEGER
          - STRING
        
  FlexAttr:
    properties:
      name:
        type: string
        description: Custom attribute name
      value: 
        type: object
        $ref: '#/definitions/FlexAttributeValue'
        description: Custom attribute value

  Attachment:
    properties:
      purpose: 
        type: string
        description: <description required>
      attachmentLocation:
        type: string
        description: <description required>
      type:
        type: string
        description: <description required>

  implCalculatedPrice:
    properties:
      ppCID:
        type: string
        description: <description required>
      ppType:
        type: string
        description: <description required>
      tierFrom:
        type: string
        description: <description required>
      tierTo:
        type: string
        description: <description required>
      quantityAtt:
        type: string
        description: <description required>
      quantityFrom:
        type: integer
        description: <description required>
      quantityTo:
        type: integer
        description: <description required>
      amountType:
        type: string
        description: <description required>
      amount:
        type: integer
        description: <description required>
      quantity:
        type: integer
        description: <dr>
      provisioningDate:
        type: string
        format: date
        description: <dr>
      
  TopLevelConfiguration:
    properties:
      implCalculatedPrices: 
        type: array
        items:
          $ref: '#/definitions/implCalculatedPrice'
      displayableItems:
        type: array
        items:
          $ref: '#/definitions/ProductDisplay'
        description: Contains products and Characteristic Values that are defined as related to this Configuration Group
      compatabilityStatus:
        type: string
        description: Constrained compatability status
        enum:
          - BLOCKING
          - COMPATIBLE
          - NOT_CHECKED
      productID:
        type: string
        description: The ID of the Product
      temporaryID:
        type: string
        description: <dr>
      serviceID:
        type: string
        description: The Service ID of the Product
      Messages:
        type: array
        items:
          $ref: '#/definitions/RuleExceptionMessage'
      productSpecification:
        type: object
        $ref: '#/definitions/ProductSpecification'
      effectiveCatalogVersion:
        type: string
        description: <dr>
      lineOfBusiness:
        type: string
        description: <dr>
      productOffering:
        type: object
        $ref: '#/definitions/ProductOffering'
      
  ProductDisplay:
    properties:
      implCalculatedPrices:
        type: array
        items:
          $ref: '#/definitions/implCalculatedPrice'
        description: <dr>
      displayableItems:
        type: array
        items:
          $ref: '#/definitions/ProductDisplay'
      productID:
        type: string
        description: <dr>
      productSpecContainmentID:
        type: string
        description: <dr>
      displayInformation:
        type: object
        $ref: '#/definitions/ProductSpecDisplay'
      productSpecContainment:      
        type: object
        $ref: '#/definitions/ProductSpecContainment'
      originalCatalogDisplayInformation:
        type: object
        $ref: '#/definitions/ProductSpecDisplay'
      temporaryID:
        type: string
        description: <dr>
      displayablePricePlan:      
        type: array
        items:
          $ref: '#/definitions/AssignedPricePlan'
        description: <dr>
      displayableCharacteristics:      
        type: array
        items:
          $ref: '#/definitions/CharacteristicValueDisplay'
        description: <dr>
      allowedActions:
        type: array
        items:
          type: string
        description: Constrained LoV of allowed actions
        enum:
          - AMEND
          - CANCEL
          - CANCEL_OFFER
          - CANCEL_PARTIAL
          - CANCEL_REPLACE_OFFER
          - CREATE
          - DISCONTINUE
          - EDIT
          - RESUME_NEGOTIATION
          - TAKEOVER
          - WITHDRAW_AMEND
          - WITHDRAW_CANCEL
      totalDeposit:
        type: object
        $ref: '#/definitions/TotalDepositCalculationResult'
        description: <dr>
      selected:
        type: boolean
        description: <dr>
      businessType:
        type: string
        description: Constrained LoV for valid business types
        enum:
          - DEVICE
          - FRIENDS_AND_FAMILY
          - TV_CHANNEL
          - TV_PACKAGE
      serviceID:
        type: string
        description: <dr>
      name:
        type: string
        description: <dr>
      action:
        type: string
        description: Constrained LoV for action
        enum:
          - Add
          - Remove
          - Reestablish
          - Resume
          - Suspend
          - Change
      status:
        type: string
        description: Constrained LoV for status
        enum:
          - ACTIVE
          - CEASED
          - SUSPENDED

  RuleExceptionMessage:
    properties:
      objectID:
        type: string
        description: <dr>
      productSpecCharacteristicID:
        type: string
        description: <dr>
      messageID:
        type: string
        description: <dr>
      ruleLevel:
        type: string
        description: Constrained LoV for rule level
          - A
          - P
          - S
      objectName:
        type: string
        description: <dr>
      parameters:
        type: array
        items:
          $ref: '#/definitions/FlexAttr'
      text:
        type: string
        description: <dr>
      
  ProductSpecification:
    properties:
      dynamicProperties:
        type: array
        items:
          $ref: '#/definitions/FlexAttr'
      attachments:
        type: array
        items:
          $ref: '#/definitions/Attachment'
        description: <dr>
      characteristics:
        type: array
        items:
          $ref: '#/definitions/ProductSpecCharacteristic'
      name:
        type: string
        description: <dr>
      id:
        type: string
        description: <dr>
      type:
        type: string
        description: <dr>
      level:
        type: string
        description: <dr>
      description:
        type: string
        description: <dr>
      code:
        type: string
        description: <dr>

  ProductOffering:
    properties:
      products:
        type: array
        items:
          $ref: '#/definitions/ProductSpecification'
        description: <dr>
      detailsGroups:
        type: array
        items:
          $ref: '#/definitions/CatalogItemCharacteristicGroup'
        description: <dr>
      dynamicProperties:
        type: array
        items:
          $ref: '#/definitions/FlexAttr'
        description: <dr>
      attachments:
        type: array
        items:
          $ref: '#/definitions/Attachment'
        description: <dr>
      calculatedPrices:
        type: array
        items:
          $ref: '#/definitions/implCalculatedPrice'
        description: <dr>
      name: 
        type: string
        description: <dr>
      id:
        type: string
        description: <dr>
      bundle:
        type: boolean
        description: <dr>
      description:
        type: string
        description: <dr>
      code:
        type: string
        description: <dr>

  ProductSpecDisplay:
    properties:
      enabled:
        type: boolean
        description: <dr>
      dynamicProperties:
        type: array
        items:
          $ref: '#/definitions/FlexAttr'
        description: <dr>
      visible:
        type: boolean
        description: <dr>
      mandatory:
        type: boolean
        description: <dr>
      showStructure:      
        type: boolean
        description: <dr>

  ProductSpecContainment:
    properties:
      dynamicProperties:
        type: array
        items:
          $ref: '#/definitions/FlexAttr'
        description: <dr> 
      minimumQuantity:
        type: integer
        format: int32
        description: <dr>
      containedProduct:
        type: object
        $ref: '#/definitions/ProductSpecification'
        description: <dr>
      defaultQuantity:
        type: integer
        format: int32
        description: <dr>
      maximumQuantity:
        type: integer
        format: int32
        description: <dr>

  AssignedPricePlan:
    properties:
      calculatedPrices:
        type: array
        items:
          $ref: '#/definitions/implCalculatedPrice'
        description: <dr> 
      displayInformation:
        type: object
        $ref: '#/definitions/PriceSchemaDisplay'
        description: <dr> 
      allowedActions:
        type: array
        items:
          type: string
        description: Constrained LoV for allowed actions
        enum:
          - AMEND
          - CANCEL
          - CANCEL_OFFER
          - CANCEL_PARTIAL
          - CANCEL_REPLACE_OFFER
          - CREATE
          - DISCONTINUE
          - EDIT
          - RESUME_NEGOTIATION
          - TAKEOVER
          - WITHDRAW_AMEND
          - WITHDRAW_CANCEL
      selected:
        type: boolean
        description: <dr>
      assignedPricePlanID:
        type: string
        description: <dr>
      productSpecPricingID:
        type: string
        description: <dr>
      crossProductDiscount:
        type: boolean
        description: <dr>
      productSpecPricing:
        type: object
        $ref: '#/definitions/ProductSpecPricing'
        description: <dr> 
      crossProductruleDescription:      
        type: string
        description: <dr>
      name:
        type: string
        description: <dr>
      action:
        type: object
        $ref: '#/definitions/ProductConfigurationActionType'
        description: <dr> 
      status:
#        type: object
#        $ref: '#/definitions/ProductActivationStatus'
#        description: <dr>
        type: string
        description: Constrained LoV for status
        enum:
          - ACTIVE
          - CEASED
          - SUSPENDED

  CharacteristicValueDisplay:
    properties:
      displayInformation:
        type: object
        $ref: '#/definitions/CharacteristicDisplay'
        description: <dr> 
      originalcatalogDisplayInformation:
        type: object
        $ref: '#/definitions/CharacteristicDisplay'
        description: <dr> 
      productSpecCharacteristicID:
        type: string
        description: <dr> 
      productSpecCharacteristic:
        type: object
        $ref: '#/definitions/ProductSpecCharacteristic'
        description: <dr> 
      value:
        type: string
        description: <dr>
      
  TotalDepositCalculationResult:
    properties:
      actualAmount:
        type: number
        format: double
        description: <dr>
      overrideAmount:
        type: number
        format: double
        description: <dr>
      originalAmount:
        type: number
        format: double
        description: <dr>
      currency:
        type: string
        description: <dr>

  ProductConfigurationActionType:
    properties:
      value:
        type: string
        description: Constrained LoV for configuration Action type
        enum:
          - Add
          - Remove
          - Reestablish
          - Resume
          - Suspend
          - Change

  PriceSchemaDisplay:
    properties:
      enabled:
        type: boolean
        description: <dr>
      visible:
        type: boolean
        description: <dr>
        
  ProductSpecPricing:
    properties:
      dynamicProperties:
        type: array
        items:
          $ref: '#/definitions/FlexAttr'
      includeByDefault:
        type: string
        description: Constrained LoV for included by default
        enum:
          - INCLUDED_BY_DEFAULT
          - MANDATORY
          - NOT_INCLUDED_BY_DEFAULT
      childPricingSchema:
        type: object
        $ref: '#/definitions/PriceSchema'
      id:
        type: string
        description: A unique identifier
        
  PriceSchema:
    properties:
      dynamicProperties:
        type: array
        items:
          $ref: '#/definitions/FlexAttr'
        description: <dr>
      calculatedPrices:
        type: array
        items:
          $ref: '#/definitions/implCalculatedPrice'
        description: <dr> 
      marketingDescription:
        type: string
        description: <dr>
      name:
        type: string
        description: <dr>
      id:
        type: string
        description: <dr>
      type:
        type: string
        description: Constrained LoV for Price Schema Type 
        enum:
          - ADDITIONAL
          - BASIC
          - PRIMARY
          - DISCOUNT
      level:
        type: string
        description: <dr>
      image:
        type: string
        description: <dr>
      description:
        type: string
        description: <dr>

  CharacteristicDisplay:
    properties:
      enabled: 
        type: boolean
        description: <dr>
      showHelpText:
        type: boolean
        description: <dr>
      dynamicProperties:
        type: array
        items:
          $ref: '#/definitions/FlexAttr'
      visible:
        type: boolean
        description: <dr>
      displayFormat:
        type: string
        description: <dr> Constrained LoV ()
      numberOfLines:
        type: integer
        format: int32
        description: <dr>
      mandatory:
        type: boolean
        description: <dr>
      name: 
        type: string
        description: <dr>
      mask:
        type: string
        description: <dr>

  ProductSpecCharacteristic:
    properties:
      enabled: 
        type: boolean
        description: <dr>
      showHelpText:
        type: boolean
        description: <dr>
      valueBasicType:
        type: string
        description: Constrained LoV for Value Basic Type 
        enum:
          - BL
          - CH
          - CX
          - DB
          - DT
          - NU
      valueRestriction:
        type: string
        description: Constrained LoV for Value Restriction
        enum:
          - DI
          - GE
          - RA
      dynamicProperties:
        type: array
        items:
          $ref: '#/definitions/FlexAttr'
      visible:
        type: boolean
        description: <dr>
      displayFormat:
        type: string
        description: <dr> Constrained LoV ()
      numberOfLines:
        type: integer
        format: int32
        description: <dr>
      mandatory:
        type: boolean
        description: <dr>
      name: 
        type: string
        description: <dr>
      defaultValue:
        type: object
        $ref: '#/definitions/CharacteristicValue'
      length:
        type: integer
        format: int32
        description: <dr>
      id:
        type: string
        description: <dr>
      mask:
        type: string
        description: <dr>
      values:
        type: array
        items:
          $ref: '#/definitions/CharacteristicValue'
      description:
        type: string
        description: <dr>
      code: 
        type: string
        description: <dr>
      
  CharacteristicValue:
    properties: 
      valueForDisplay:
        type: string
        description: <dr>
      valueTo:
        type: string
        description: <dr>
      valueFrom:
        type: string
        description: <dr>

  CatalogItemCharacteristicGroup:
    properties:
      characteristics:
        type: array
        items:
          $ref: '#/definitions/CatalogItemCharacteristic'
        description: <dr>
      name: 
        type: string
        description: <dr>
        
  CatalogItemCharacteristic:
    properties:
      valueRestriction:
        type: string
        description: Constrained LoV for Value Restriction
        enum:
          - DI
          - GE
          - RA
      additionalProperties:
        type: array
        items:
          $ref: '#/definitions/FlexAttr'      
        description: <dr>
      valueType:  
        type: string
        description: Constrained LoV for Value Type 
        enum:
          - BL
          - CH
          - CX
          - DB
          - DT
          - NU
      name:
        type: string
        description: <dr> 
      values:
        type: array
        items:
          $ref: '#/definitions/CatalogItemCharacteristicValue'
        description: <dr>
      
  CatalogItemCharacteristicValue:
    properties:
      valueTo:
        type: string
        description: <dr> 
      value:
        type: string
        description: <dr> 

  CatalogItemCharacteristicGroup:
    properties:
      characteristics:
        type: array
        items:
          $ref: '#/definitions/CatalogItemCharacteristic'
        description: <dr>
  
  ReturnConfigurationData:
    properties:
      productConfigurationInd:
        type: boolean
        description: Indicates that the entire configuration of the requested product/offer/bundle, the existing and the available options must be returned.  Mandatory - always send TRUE
      catalogDataInd:
        type: boolean
        description: Indicates that the returned information includes the detailed catalog information of the requested product/offer/bundle.  Does not include prices.  Mandatory - always send TRUE.
      quotedPricesInd:
        type: boolean
        description: Indicates that the returned information includes the quoted prices of the requested product/offer/bundle.  Prices do not include tax information.  Mandatory - always send TRUE.
      summaryInd:
        type: boolean
        description: Indicates that the summary information of the requested product/offer/bundle must be returned.  The summary details include information of the catalog data and the instance information.  Summary details do not include pricing details.  Mandatory - always send TRUE.

  ServiceabilityObject:
    properties:
      sys:
        type: string
        description: Value of SYS
      prin:
        type: string
        description: Value of PRIN
      agent:
        type: string
        description: Value of AGENT
      LOBServiceability:
        type: array
        items:
          $ref: '#/definitions/LOBServiceability'
      availabilityGroup:
        type: string
        description: Parameter used for phone
      dwellType:
        type: string
        description: Type used for competitive area     
      customerIsNew:
        type: boolean
        description: Indicator to indicate whether this is a new (TRUE) or existing (FALSE) customer
      customerHasActiveAccount:
        type: boolean
        description: Indicator to indicate whether the customer has n active account (TRUE) or not (FALSE)
      customerType:
        type: string
        description: Business or Residential - all Residential in current release
        enum:
        - Business
        - Residential
      orderActionType:
        type: string
        description: Constrained LoV for Action Type (CH - Change, CE - Cease, SU - Suspend, HM - Change Move, RT - Restart, CR - Cease Restart, PR - Provide)
        enum:
        - CH
        - CE
        - SU
        - HM
        - RT
        - CR
        - PR
      userRole:
        type: string
        description: User Role (CSR or manager)
        enum: 
        - manager
        - CSR
      offerCode:
        type: array
        items: 
          type: string
        description: list of specific offer codes or IDs
      additional attributes:
        type: array
        items:
          $ref: '#/definitions/AdditionalAttribute'
        description: If some of the parameters for eligibility rules/serviceability are necessary (and were not in the initial list) can be added here

  LOBServiceability:
    properties:
      LOBName:
        type: string
        description: Line Of Business name
      LOBServiceStatus:
        type: string
        description: An indication if the LOB is serviceable or not

  AdditionalAttribute:
    properties:
      name:
        type: string
        description: Custom attribute name
      value: 
        type: string
        description: Custom attribute value
        

  
  ImplRetrieveProductInOrderConfigurationResponse:
    properties:
      productOrderItemID:
        type: string
        description: The ID of the ProductOrderItem
      productOrderItemReferenceNumber:
        type: string
        description: Reference number of the ProductOrderItem
      productConfiguration:
        type: object
        $ref: '#/definitions/TopLevelConfiguration'
      productID:
        type: string
        description: ID of the product
      productOrderItemType:
        type: string
        description: Action that is taken on the product  

  ImplProductConfigurationOptionsResponse:
    properties:
      implBaseReturn:
        type: object 
        $ref: "#/definitions/CommonNoErrorReturn"
      implRetrieveProductOrderConfigurationResponse:
        type: object
        $ref: "#/definitions/ImplRetrieveProductInOrderConfigurationResponse"
        
