# this is draft #1 of the TN_ADMIN component of the WebAPI specification for Gateway Ordering
swagger: '2.0'
info:
  title: Gateway Ordering API - TN_ADMIN API
  description: Gateway Ordering TN_ADMIN API
  version: "1.0.0"
# the domain of the service
host: gateway.chartercom.com
# array of all schemes that your API supports
schemes:
  - https
# will be prefixed to all paths
basePath: /v1
produces:
  - application/json
paths:

  /TN_Admin/AvailableTNs:
    get:
      summary: Docref W06 - Get available TNs from TN adminstrator
      description: <dr>
      parameters:
        - name: GetAvailableTNsRequest
          in: body
          description: Incudes input parameters common to all invocations
          required: true
          schema: 
           $ref: "#/definitions/GetAvailableTNsRequest"
      tags:
        - W06
      responses:
        200:
          description: Successful completion; return location serviceability
          schema:
            $ref: '#/definitions/GetAvailableTNsResponse'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/CommonErrorReturn'

  /TN_Admin/AvailableTNs/{TN}:
    get:
      summary: Docref W19 - Verify that the specified TN is available for resetart/reconnect
      description: <dr>
      parameters:
        - name: TN
          in: path
          description: TN being queried for restart eligibility
          required: true
          type: string
        - name: VerifyTNRestartRequest
          in: body
          description: Incudes input parameters common to all invocations
          required: true
          schema: 
           $ref: "#/definitions/VerifyTNRestartRequest"
      tags:
        - W19
      responses:
        200:
          description: Successful completion; return location serviceability
          schema:
            $ref: '#/definitions/VerifyTNRestartReturn'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/CommonErrorReturn'

    post:
      summary: Docref W07 - Release unused TNs back to the TN Adminsitrator's available pool.  Called separately for each unused TN.
      description: <dr>
      parameters:
        - name: TN
          in: path
          type: string
          description: TN to be returned to "Available" status 
        - name: ReleaseUnusedTNsRequest
          in: body
          description: Incudes input parameters common to all invocations
          required: true
          schema: 
           $ref: "#/definitions/ReleaseUnusedTNsRequest"
      tags:
        - W07
      responses:
        200:
          description: Successful completion; return <function>
          schema:
            $ref: '#/definitions/ReleaseUnusedTNsResponse'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/CommonErrorReturn'

  /TN_Admin/TNPortability/{TN}:
    get:
      summary: Docref W5 - Verify port-in eligibility
      description: <dr>  
      parameters:
        - name: TN
          in: path
          type: string
          description: TN being queried for port-in eligibility
        - name: TNPortabilityRequest
          in: body
          description: Incudes input parameters common to all invocations
          required: true
          schema: 
           $ref: "#/definitions/TNPortabilityRequest"
      tags:
        - W5
      responses:
        200:
          description: Successful completion; return boolean indicating TN can/cannot be ported/transferred
          schema:
            $ref: '#/definitions/TNPortabilityResponse'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/CommonErrorReturn'

  /TN_Admin/TNTransferEligibility/{TN}:
    get:
      summary: Docref W20 - Verify transfer eligibility
      description: <dr>  
      parameters:
        - name: TN
          in: path
          type: string
          description: TN being queried for transfer eligibility
        - name: TNPortabilityRequest
          in: body
          description: Incudes input parameters common to all invocations
          required: true
          schema: 
           $ref: "#/definitions/TNTransferEligibilityRequest"
      tags:
        - W20
      responses:
        200:
          description: Successful completion; return boolean indicating TN can/cannot be ported/transferred
          schema:
            $ref: '#/definitions/TNTransferEligibilityResponse'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/CommonErrorReturn'

definitions:

##############################################
#
#	Request/Response definitions
#
##############################################

  GetAvailableTNsRequest:
    properties:
      commonInputHeader:
        type: object
        $ref: '#/definitions/CommonInputHeader'
        description: Common parameters submitted with all service calls to support authentication, reporting, logging and troubleshooting.
      AvailableTNsInput:
        type: object
        $ref: '#/definitions/AvailableTNsInput'
        
  GetAvailableTNsResponse:
    properties:
      commonReturn: 
        type: object
        $ref: '#/definitions/CommonNoErrorReturnHeader'
        description: <dr>
      AvailableTNsReturn: 
        type: object
        $ref: '#/definitions/AvailableTNsReturn'
        description: <dr>

  VerifyTNRestartRequest:
    properties:
      commonInputHeader:
        type: object
        $ref: '#/definitions/CommonInputHeader'
        description: Common parameters submitted with all service calls to support authentication, reporting, logging and troubleshooting.
      TNRestartEligibilityInput:
        type: object
        $ref: '#/definitions/TNRestartEligibility'
        description: <dr>
  
  VerifyTNRestartReturn:
    properties:
      commonReturn: 
        type: object
        $ref: '#/definitions/CommonNoErrorReturnHeader'
        description: <dr>
      TNRestartEligibilityReturn:
        type: object
        $ref: '#/definitions/TNRestartEligibility'
        description: <dr>
      restartEligibilityFlag:
        type: boolean
        description: Flag indicating TN is/is not available for restart.

  ReleaseUnusedTNsRequest:
    properties:
      commonInputHeader:
        type: object
        $ref: '#/definitions/CommonInputHeader'
        description: Common parameters submitted with all service calls to support authentication, reporting, logging and troubleshooting.
      ReleaseUnusedTNsInput:
        type: object
        $ref: '#/definitions/USTelephoneNumber'
        description: <dr>      
  
  ReleaseUnusedTNsResponse:
    properties:
      commonReturn: 
        type: object
        $ref: '#/definitions/CommonNoErrorReturnHeader'
        description: <dr>

  TNPortabilityRequest:
    properties:
      commonInputHeader:
        type: object
        $ref: '#/definitions/CommonInputHeader'
        description: Common parameters submitted with all service calls to support authentication, reporting, logging and troubleshooting.
      TNPortabilityInput:
        type: object
        $ref: '#/definitions/TNPortabilityInput'
        description: <dr>      
  
  TNPortabilityResponse:
    properties:
      commonReturn: 
        type: object
        $ref: '#/definitions/CommonNoErrorReturnHeader'
        description: <dr>
      TNPortabilityReturn:
        type: object
        $ref: '#/definitions/TNPortabilityReturn'
        description: <dr>

  TNTransferEligibilityRequest:
    properties:
      commonInputHeader:
        type: object
        $ref: '#/definitions/CommonInputHeader'
        description: Common parameters submitted with all service calls to support authentication, reporting, logging and troubleshooting.
      TNPortabilityInput:
        type: object
        $ref: '#/definitions/TNTransferEligibility'
        description: <dr>      
  
  TNTransferEligibilityResponse:
    properties:
      commonReturn: 
        type: object
        $ref: '#/definitions/CommonNoErrorReturnHeader'
        description: <dr>
      TNPortabilityReturn:
        type: object
        $ref: '#/definitions/TNTransferEligibility'
        description: <dr>      
      transferabilityEligibilityFlag:
        type: boolean
        description: Flag indicating TN is/is not available for transfer.

##############################################
#
#	Common Object definitions
#
##############################################

  CommonInputHeader:
    properties:
      username:
        type: string
        description: Encrypted username for proxy user authentication
      password:
        type: string
        description: Encrypted passaord for proxy user authentication
      invokingUser:
        type: string
        description: User name for the actual user that invoked the call (for audit purpose)
      applicationID:
        type: string
        description: Code identifying invoking application
      lineageID:
        type: integer
        description: Unique transaction identifier; used for transactional error handling
      timestamp:
        type: string
        description: Time that the service call was invoked

  CommonNoErrorReturnHeader:
    properties:
      lineageID:
        type: integer
        description: Unique transaction identifier; used for transactional error handling
      timestamp:
        type: string
        description: Time that the service call was returned
        
  CommonErrorReturn:
    properties:
      lineageID:
        type: integer
        description: Unique transaction identifier; used for transactional error handling
      timestamp:
        type: string
        description: Time that the service call was returned
      errorInfo:
        type: array
        items:
          $ref: "#/definitions/CommonErrors"
  
  CommonErrors:
    properties:
      errCode:
        type: string
      errMessage:
        type: string
      errDescription:
        type: string
      errGUID:
        type: string

##############################################
#
#	Function-Specific Object definitions
#
##############################################

  AvailableTNsInput:
    properties: 
      addressID:
        type: integer
        description: Unique identifier for the location being queried
      requestCount:
        type: integer
        description: Number of available TNs to be returned.  Default will be 5.
      TNHostedNumberSearch:
        type: boolean
        description: <dr>
  
  AvailableTNsReturn:
    properties:
      availableTNs:
        type: array
        items:
          $ref: '#/definitions/USTelephoneNumber'
    
  TNPortabilityInput:
    properties:
      addressID:
        type: integer
        description: Unique identifier for the location being queried
      portedTN:
        type: string
        description: Telephone number (with area code) being requested for port-in

  TNPortabilityReturn:
    properties:
      portedCarrier:
        type: string
        description: <dr>
      portedAccountNumberRequiredFlag:
        type: boolean
        description: <dr>
      portedAccountPINRequiredFlag:
        type: boolean
        description: <dr>
      LSRValidationStatus:
        type: string
        description: <dr>
        
  TNRestartEligibility:
    properties:
      accountID:
        type: integer
        description: <dr>
      accountNumber:
        type: integer
        description: <dr>
      billertID:
        type: integer
        description: <dr>
      phoneNumber:
        type: string
        description: <dr>
        
  TNTransferEligibility:
    properties:
      accountID:
        type: integer
        description: <dr>
      accountNumber:
        type: integer
        description: <dr>
      billertID:
        type: integer
        description: <dr>
      phoneNumber:
        type: string
        description: <dr>
      rateCenter:
        type: string
        description: <dr>

  USTelephoneNumber:
    properties:
      areaCode:
        type: string
        description: <dr>
      phoneNumber:
        type: string
        description: <dr>
